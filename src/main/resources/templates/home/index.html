<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragmentos :: cabecalho('Dashboard - Sistema de Gerenciamento Mottu')}" />

  <body>

	<form th:replace="~{fragmentos :: form-logout}" />

	<div class="container-fluid">
		<!-- Header com informações do usuário -->
		<div class="row bg-primary text-white p-4 mb-4">
			<div class="col-md-8">
				<div class="d-flex align-items-center">
					<img th:src="${usuario?.imgPerfil}" 
						 th:alt="${usuario?.nomePerfil}" 
						 style="width: 80px; height: 80px; border-radius: 50%; margin-right: 20px;"
						 onerror="this.src='https://via.placeholder.com/80x80/007bff/ffffff?text=U'">
					<div>
						<h2 th:text="'Olá, ' + ${usuario?.nomePerfil} + '!'">Olá, Usuário!</h2>
						<p class="mb-0" th:text="'Usuário: ' + ${usuario?.username}">Usuário: admin</p>
						<p class="mb-0" th:if="${usuario?.funcoes != null and !usuario.funcoes.empty}">
							<strong>Funções:</strong> 
							<span th:each="funcao, iterStat : ${usuario.funcoes}" 
								  th:text="${funcao.nome} + (${!iterStat.last} ? ', ' : '')">Admin</span>
						</p>
					</div>
				</div>
			</div>
			<div class="col-md-4 text-end">
				<div class="mt-3">
					<h4>Sistema de Gerenciamento Mottu</h4>
					<p class="mb-0">Gestão Completa</p>
				</div>
			</div>
		</div>

		<!-- Menu de navegação -->
		<div class="row mb-4">
			<div class="col-12">
				<nav th:replace="~{fragmentos :: menu}" />
			</div>
		</div>

		<!-- Cards com opções de CRUD -->
		<div class="row">
			<div class="col-lg-3 col-md-6 mb-4">
				<div class="card h-100 shadow-sm">
					<div class="card-body text-center">
						<i class="fas fa-map-marker-alt fa-3x text-primary mb-3"></i>
						<h5 class="card-title">Endereços</h5>
						<p class="card-text">Gerencie os endereços cadastrados no sistema.</p>
						<a href="/enderecos" class="btn btn-primary">Acessar</a>
					</div>
				</div>
			</div>
			
			<div class="col-lg-3 col-md-6 mb-4">
				<div class="card h-100 shadow-sm">
					<div class="card-body text-center">
						<i class="fas fa-building fa-3x text-success mb-3"></i>
						<h5 class="card-title">Filiais</h5>
						<p class="card-text">Gerencie as filiais do sistema.</p>
						<a href="/filiais" class="btn btn-success">Acessar</a>
					</div>
				</div>
			</div>
			
			<div class="col-lg-3 col-md-6 mb-4">
				<div class="card h-100 shadow-sm">
					<div class="card-body text-center">
						<i class="fas fa-motorcycle fa-3x text-warning mb-3"></i>
						<h5 class="card-title">Motos</h5>
						<p class="card-text">Gerencie o cadastro de motos.</p>
						<a href="/motos" class="btn btn-warning">Acessar</a>
					</div>
				</div>
			</div>
			
			<div class="col-lg-3 col-md-6 mb-4">
				<div class="card h-100 shadow-sm">
					<div class="card-body text-center">
						<i class="fas fa-users fa-3x text-info mb-3"></i>
						<h5 class="card-title">Funcionários</h5>
						<p class="card-text">Gerencie os funcionários do sistema.</p>
						<a href="/funcionarios" class="btn btn-info">Acessar</a>
					</div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-lg-3 col-md-6 mb-4">
				<div class="card h-100 shadow-sm">
					<div class="card-body text-center">
						<i class="fas fa-location-dot fa-3x text-danger mb-3"></i>
						<h5 class="card-title">Localizações</h5>
						<p class="card-text">Gerencie as localizações cadastradas.</p>
						<a href="/localizacoes" class="btn btn-danger">Acessar</a>
					</div>
				</div>
			</div>
			
			<div class="col-lg-3 col-md-6 mb-4" th:if="${usuario?.funcoes != null and usuario.funcoes.![nome].contains(T(br.com.fiap.universidade_fiap.model.EnumFuncao).ADMIN)}">
				<div class="card h-100 shadow-sm">
					<div class="card-body text-center">
						<i class="fas fa-user-plus fa-3x text-secondary mb-3"></i>
						<h5 class="card-title">Usuários</h5>
						<p class="card-text">Gerencie usuários do sistema (Admin).</p>
						<a href="/usuario/novo" class="btn btn-secondary">Acessar</a>
					</div>
				</div>
			</div>
		</div>

		<!-- Informações adicionais -->
		<div class="row mt-4">
			<div class="col-12">
				<div class="card">
					<div class="card-header">
						<h5 class="mb-0">Informações do Sistema</h5>
					</div>
					<div class="card-body">
						<div class="row">
							<div class="col-md-4">
								<h6>Status da Sessão</h6>
								<span class="badge bg-success">Ativa</span>
							</div>
							<div class="col-md-4">
								<h6>Último Acesso</h6>
								<small class="text-muted">Agora</small>
							</div>
							<div class="col-md-4">
								<h6>Perfil</h6>
								<span th:if="${usuario?.funcoes != null and usuario.funcoes.![nome].contains(T(br.com.fiap.universidade_fiap.model.EnumFuncao).ADMIN)}" 
									  class="badge bg-danger">Administrador</span>
								<span th:unless="${usuario?.funcoes != null and usuario.funcoes.![nome].contains(T(br.com.fiap.universidade_fiap.model.EnumFuncao).ADMIN)}" 
									  class="badge bg-primary">Usuário</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    
    <!-- Font Awesome para ícones -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  </body>
</html>